import{V as w,h,c as p,b as v,a as C,j as F,f as Z}from"./CbQCUF9d.js";import{k as N,F as K,c as T,d as g,e as tt,J as et,B as at,E as P}from"./DcnzPrsv.js";import{e as j,s as V,j as I,c as L,o as n,b as s,x as c,J as i,w as e,a as o,d as u,t as r,M as lt,N as st,O as ot,_ as nt}from"#entry";import"./QYhEshKI.js";import"./bO5Qj5nW.js";const rt={class:"copilot-data-extractor"},it={class:"d-grid gap-3",style:{"grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))"}},ut={class:"font-weight-bold"},ct={class:"text-h5 font-weight-bold text-primary"},dt={class:"text-h5 font-weight-bold text-success"},pt={class:"text-h5 font-weight-bold text-info"},mt={class:"text-h5 font-weight-bold text-warning"},ft=["title"],vt=["title"],xt={class:"text-caption"},yt=["colspan"],gt={class:"text-caption text-grey"},_t={class:"text-caption text-grey text-break"},bt={class:"text-caption text-grey"},kt=j({__name:"CopilotDataExtractor",setup(A){const x=V(!1),_=V(""),d=V([]),f=V(""),b=V(""),D=V(""),B=["vscode","vscode-insider","visualstudio","ssms","copilot-cli"],R=I(()=>[...new Set(d.value.map(l=>l.type).filter(Boolean))]),k=I(()=>{const l=E.value;return{totalPrompts:l.filter(t=>t.prompt).length,totalResponses:l.filter(t=>t.response).length,dataTypes:R.value.length}}),E=I(()=>d.value.filter(l=>f.value?l.ide===f.value:!0)),S=I(()=>E.value.filter(l=>{const t=!b.value||l.prompt?.toLowerCase().includes(b.value.toLowerCase())||l.response?.toLowerCase().includes(b.value.toLowerCase())||l.source?.toLowerCase().includes(b.value.toLowerCase()),a=!D.value||l.type===D.value;return t&&a})),$=[{title:"Type",key:"type",width:"80px"},{title:"Prompt",key:"prompt"},{title:"Response",key:"response"},{title:"Timestamp",key:"timestamp",width:"150px"},{title:"Source",key:"source",width:"150px"},{title:"Actions",key:"actions",width:"80px",sortable:!1}];function O(l){return{vscode:"mdi-microsoft-visual-studio-code","vscode-insider":"mdi-microsoft-visual-studio-code",visualstudio:"mdi-microsoft-visual-studio",ssms:"mdi-database","copilot-cli":"mdi-console"}[l]||"mdi-code"}function U(l){return{vscode:"VS Code","vscode-insider":"VS Code Insider",visualstudio:"Visual Studio 2022",ssms:"SQL Server Studio","copilot-cli":"Copilot CLI"}[l]||l}function J(l){return{chat:"info","cli-session":"primary","sql-chat":"warning",command:"success",setting:"secondary","log-entry":"grey",unknown:"default"}[l||"unknown"]||"default"}function H(l){f.value=f.value===l?"":l}function z(l,t=100){return l?l.length>t?l.substring(0,t)+"...":l:"N/A"}async function Q(){x.value=!0,_.value="";try{const l=await $fetch("/api/copilot-data-extractor?action=extract-all");l.success&&l.data&&(d.value=[],l.data.forEach(t=>{t.dataFiles.forEach(a=>{d.value.push({...a,ide:t.ide})})}))}catch(l){_.value=l instanceof Error?l.message:"Failed to extract data"}finally{x.value=!1}}async function q(){if(f.value){x.value=!0,_.value="";try{const l=await $fetch(`/api/copilot-data-extractor?action=extract-ide&ide=${f.value}`);l.success&&l.data&&(d.value=l.data.dataFiles.map(t=>({...t,ide:l.data.ide})))}catch(l){_.value=l instanceof Error?l.message:"Failed to extract data"}finally{x.value=!1}}}function G(){d.value=[],f.value="",b.value="",D.value=""}function M(l){console.log("View detail for:",l)}function Y(){const l=JSON.stringify(S.value,null,2),t=new Blob([l],{type:"application/json"}),a=URL.createObjectURL(t),m=document.createElement("a");m.href=a,m.download=`copilot-data-${new Date().toISOString()}.json`,m.click()}function W(){const l=X(S.value),t=new Blob([l],{type:"text/csv"}),a=URL.createObjectURL(t),m=document.createElement("a");m.href=a,m.download=`copilot-data-${new Date().toISOString()}.csv`,m.click()}function X(l){const t=["ID","Type","Prompt","Response","Timestamp","Source","File"],a=l.map(y=>[y.id,y.type||"",`"${(y.prompt||"").replace(/"/g,'""')}"`,`"${(y.response||"").replace(/"/g,'""')}"`,y.timestamp||"",y.source||"",y.file||""]);return[t.join(","),...a.map(y=>y.join(","))].join(`
`)}return(l,t)=>(n(),L("div",rt,[s(p,{class:"mb-6"},{default:e(()=>[s(w,{class:"d-flex align-center gap-3"},{default:e(()=>[s(h,{color:"primary",size:"32"},{default:e(()=>[...t[3]||(t[3]=[u("mdi-robot-love",-1)])]),_:1}),t[4]||(t[4]=o("div",null,[o("h1",{class:"text-h4 mb-1"},"GitHub Copilot Data Extractor"),o("p",{class:"text-caption text-grey"},"Extract all prompts and responses from all IDEs")],-1))]),_:1})]),_:1}),s(p,{class:"mb-6"},{default:e(()=>[s(v,{class:"d-flex gap-3 flex-wrap"},{default:e(()=>[s(C,{color:"primary",size:"large",onClick:Q,loading:x.value,"prepend-icon":"mdi-database-export"},{default:e(()=>[...t[5]||(t[5]=[u(" Extract All IDEs ",-1)])]),_:1},8,["loading"]),f.value?(n(),c(C,{key:0,color:"secondary",size:"large",onClick:q,loading:x.value,"prepend-icon":"mdi-download"},{default:e(()=>[u(" Extract "+r(f.value),1)]),_:1},8,["loading"])):i("",!0),d.value.length>0?(n(),c(C,{key:1,color:"info",size:"large",onClick:G,"prepend-icon":"mdi-delete"},{default:e(()=>[...t[6]||(t[6]=[u(" Clear Data ",-1)])]),_:1})):i("",!0),s(N),k.value.totalPrompts>0?(n(),c(F,{key:2,color:"success",class:"text-white font-weight-bold","prepend-icon":"mdi-chat-outline"},{default:e(()=>[u(r(k.value.totalPrompts)+" Prompts ",1)]),_:1})):i("",!0),k.value.totalResponses>0?(n(),c(F,{key:3,color:"info",class:"text-white font-weight-bold","prepend-icon":"mdi-reply"},{default:e(()=>[u(r(k.value.totalResponses)+" Responses ",1)]),_:1})):i("",!0)]),_:1})]),_:1}),!E.value||E.value.length===0?(n(),c(p,{key:0,class:"mb-6"},{default:e(()=>[s(w,null,{default:e(()=>[...t[7]||(t[7]=[u("Available IDEs",-1)])]),_:1}),s(v,null,{default:e(()=>[o("div",it,[(n(),L(lt,null,st(B,a=>s(p,{key:a,onClick:m=>H(a),variant:f.value===a?"elevated":"outlined",class:ot([{"border-primary":f.value===a},"cursor-pointer hover-elevated"])},{default:e(()=>[s(v,{class:"text-center py-4"},{default:e(()=>[s(h,{size:"32",color:"primary",class:"mb-2"},{default:e(()=>[u(r(O(a)),1)]),_:2},1024),o("p",ut,r(U(a)),1),t[8]||(t[8]=o("p",{class:"text-caption text-grey"},"Click to filter",-1))]),_:2},1024)]),_:2},1032,["onClick","variant","class"])),64))])]),_:1})]),_:1})):i("",!0),x.value?(n(),c(Z,{key:1,indeterminate:"",color:"primary",class:"mb-4"})):i("",!0),_.value?(n(),c(K,{key:2,type:"error",class:"mb-6",closable:"","onClick:close":t[0]||(t[0]=a=>_.value="")},{default:e(()=>[t[9]||(t[9]=o("strong",null,"Error:",-1)),u(" "+r(_.value),1)]),_:1})):i("",!0),d.value.length>0?(n(),c(p,{key:3,class:"mb-6"},{default:e(()=>[s(w,null,{default:e(()=>[...t[10]||(t[10]=[u("Summary Statistics",-1)])]),_:1}),s(v,null,{default:e(()=>[s(T,null,{default:e(()=>[s(g,{cols:"12",sm:"6",md:"3"},{default:e(()=>[s(p,{variant:"tonal",class:"h-100"},{default:e(()=>[s(v,null,{default:e(()=>[t[11]||(t[11]=o("p",{class:"text-caption text-grey mb-1"},"Total Data Points",-1)),o("p",ct,r(d.value.length),1)]),_:1})]),_:1})]),_:1}),s(g,{cols:"12",sm:"6",md:"3"},{default:e(()=>[s(p,{variant:"tonal",class:"h-100"},{default:e(()=>[s(v,null,{default:e(()=>[t[12]||(t[12]=o("p",{class:"text-caption text-grey mb-1"},"Total Prompts",-1)),o("p",dt,r(k.value.totalPrompts),1)]),_:1})]),_:1})]),_:1}),s(g,{cols:"12",sm:"6",md:"3"},{default:e(()=>[s(p,{variant:"tonal",class:"h-100"},{default:e(()=>[s(v,null,{default:e(()=>[t[13]||(t[13]=o("p",{class:"text-caption text-grey mb-1"},"Total Responses",-1)),o("p",pt,r(k.value.totalResponses),1)]),_:1})]),_:1})]),_:1}),s(g,{cols:"12",sm:"6",md:"3"},{default:e(()=>[s(p,{variant:"tonal",class:"h-100"},{default:e(()=>[s(v,null,{default:e(()=>[t[14]||(t[14]=o("p",{class:"text-caption text-grey mb-1"},"Data Types Found",-1)),o("p",mt,r(k.value.dataTypes),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):i("",!0),d.value.length>0?(n(),c(p,{key:4,class:"mb-6"},{default:e(()=>[s(w,null,{default:e(()=>[...t[15]||(t[15]=[u("Filters",-1)])]),_:1}),s(v,{class:"d-flex gap-3 flex-wrap"},{default:e(()=>[s(tt,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=a=>b.value=a),label:"Search prompts/responses","prepend-icon":"mdi-magnify",clearable:"",density:"compact",style:{"max-width":"300px"}},null,8,["modelValue"]),s(et,{modelValue:D.value,"onUpdate:modelValue":t[2]||(t[2]=a=>D.value=a),items:R.value,label:"Filter by type",clearable:"",density:"compact",style:{"max-width":"200px"}},null,8,["modelValue","items"]),s(N),s(C,{color:"success",size:"small",onClick:Y,"prepend-icon":"mdi-file-export"},{default:e(()=>[...t[16]||(t[16]=[u(" Export JSON ",-1)])]),_:1}),s(C,{color:"success",size:"small",onClick:W,"prepend-icon":"mdi-file-delimited"},{default:e(()=>[...t[17]||(t[17]=[u(" Export CSV ",-1)])]),_:1})]),_:1})]),_:1})):i("",!0),d.value.length>0?(n(),c(p,{key:5},{default:e(()=>[s(w,null,{default:e(()=>[u("Extracted Copilot Data ("+r(S.value.length)+" / "+r(d.value.length)+")",1)]),_:1}),s(at,{headers:$,items:S.value,"page-size":10,class:"elevation-0",density:"compact"},{"item.type":e(({item:a})=>[s(F,{color:J(a.type),size:"small",label:""},{default:e(()=>[u(r(a.type||"unknown"),1)]),_:2},1032,["color"])]),"item.prompt":e(({item:a})=>[o("div",{class:"text-truncate max-width-300",title:a.prompt},r(z(a.prompt,100)),9,ft)]),"item.response":e(({item:a})=>[o("div",{class:"text-truncate max-width-300",title:a.response},r(z(a.response,100)),9,vt)]),"item.timestamp":e(({item:a})=>[o("span",xt,r(a.timestamp?new Date(a.timestamp).toLocaleString():"N/A"),1)]),"item.actions":e(({item:a})=>[s(C,{icon:"",size:"x-small",onClick:m=>M(a),color:"primary",variant:"text"},{default:e(()=>[s(h,null,{default:e(()=>[...t[18]||(t[18]=[u("mdi-eye",-1)])]),_:1})]),_:1},8,["onClick"])]),"expanded-row":e(({item:a,isExpanded:m})=>[m[a.id]?(n(),L("tr",{key:`expanded-${a.id}`},[o("td",{colspan:$.length,class:"pa-6"},[s(p,{variant:"tonal",class:"mb-4"},{default:e(()=>[s(w,{class:"text-h6"},{default:e(()=>[...t[19]||(t[19]=[u("Full Content",-1)])]),_:1}),s(v,null,{default:e(()=>[s(T,{class:"mb-4"},{default:e(()=>[a.prompt?(n(),c(g,{key:0,cols:"12",sm:"6"},{default:e(()=>[t[20]||(t[20]=o("strong",null,"Prompt:",-1)),s(p,{variant:"outlined",class:"mt-2 pa-3"},{default:e(()=>[u(r(a.prompt),1)]),_:2},1024)]),_:2},1024)):i("",!0),a.response?(n(),c(g,{key:1,cols:"12",sm:"6"},{default:e(()=>[t[21]||(t[21]=o("strong",null,"Response:",-1)),s(p,{variant:"outlined",class:"mt-2 pa-3"},{default:e(()=>[u(r(a.response),1)]),_:2},1024)]),_:2},1024)):i("",!0)]),_:2},1024),a.file||a.source?(n(),c(P,{key:0,class:"my-4"})):i("",!0),a.file||a.source?(n(),c(T,{key:1},{default:e(()=>[a.source?(n(),c(g,{key:0,cols:"12",sm:"6"},{default:e(()=>[t[22]||(t[22]=o("strong",null,"Source File:",-1)),o("p",gt,r(a.source),1)]),_:2},1024)):i("",!0),a.file?(n(),c(g,{key:1,cols:"12",sm:"6"},{default:e(()=>[t[23]||(t[23]=o("strong",null,"Full Path:",-1)),o("p",_t,r(a.file),1)]),_:2},1024)):i("",!0)]),_:2},1024)):i("",!0),a.timestamp?(n(),c(P,{key:2,class:"my-4"})):i("",!0),a.timestamp?(n(),c(T,{key:3},{default:e(()=>[s(g,{cols:"12"},{default:e(()=>[t[24]||(t[24]=o("strong",null,"Timestamp:",-1)),o("p",bt,r(a.timestamp),1)]),_:2},1024)]),_:2},1024)):i("",!0)]),_:2},1024)]),_:2},1024)],8,yt)])):i("",!0)]),_:1},8,["items"])]),_:1})):i("",!0),d.value.length===0&&!x.value?(n(),c(p,{key:6,class:"text-center py-12"},{default:e(()=>[s(h,{size:"64",color:"grey",class:"mb-4"},{default:e(()=>[...t[25]||(t[25]=[u("mdi-inbox-outline",-1)])]),_:1}),t[26]||(t[26]=o("p",{class:"text-h6 mb-2"},"No Data Extracted Yet",-1)),t[27]||(t[27]=o("p",{class:"text-grey mb-6"},'Click "Extract All IDEs" to start scanning your system',-1))]),_:1})):i("",!0)]))}}),wt=Object.assign(nt(kt,[["__scopeId","data-v-9c7b0453"]]),{__name:"CopilotDataExtractor"}),Ct={class:"pa-6"},Tt=j({__name:"copilot-data-extractor",setup(A){return(x,_)=>{const d=wt;return n(),L("div",Ct,[s(d)])}}});export{Tt as default};
